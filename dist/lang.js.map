{"version":3,"sources":["lang.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;;;;;sBAEC,QAAQ;;;;kBACP,IAAI;;;;wBACJ,UAAU;;;;AAEzB,SAAS,IAAI,CAAC,EAAE,EAAE,GAAG,EAAE;AACrB,SAAO,YAAW;AAChB,WAAO,EAAE,CAAC,KAAK,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC;GACjC,CAAC;CACH;;;AAGD,SAAS,OAAO,CAAC,GAAG,EAAE,OAAO,EAAE;;AAE7B,MAAI,CAAC,OAAO,EAAE;AACZ,WAAO,GAAG,oBAAE,SAAS,CAAC,GAAG,CAAC,CAAC;GAC5B,MAAM,IAAI,CAAC,oBAAE,OAAO,CAAC,OAAO,CAAC,EAAE;AAC9B,WAAO,GAAG,CAAC,OAAO,CAAC,CAAC;GACrB;;AAED,SAAO,CAAC,OAAO,CAAC,UAAS,CAAC,EAAE;AAC1B,QAAI,OAAO,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;AACrB,QAAI,OAAO,EAAE;AACX,SAAG,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;AAC3B,SAAG,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,YAAW;AAC1B,WAAG,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC;OAClB,CAAC;KACH;GACF,CAAC,CAAC;CAEJ;;;;;;;;;;;AAWD,SAAS,UAAU,GAAG;;AAEpB,MAAI,CAAC,SAAS,CAAC,MAAM,EAAE;AACrB,UAAM,IAAI,KAAK,CAAC,wBAAwB,CAAC,CAAC;GAC3C;;AAED,MAAI,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;AAC7B,MAAI,IAAI,GAAG,EAAE,CAAC;;AAEd,OAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACzC,QAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;GACzB;;AAED,MAAI,OAAO,GAAG,EAAE,CAAC;;AAEjB,SAAO,sBAAG,SAAS,CAAC,gBAAG,OAAO,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,UAAS,KAAK,EAAE;;AAE9D,WAAO,KAAK,CACT,IAAI,CAAC,UAAS,CAAC,EAAE,CAAC,EAAE;AACnB,aAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;KACvB,CAAC,CACD,MAAM,CAAC,UAAU,CAAC,EAAE,CAAC,EAAE;AACtB,UAAI,CAAC,IAAI,CAAC,KAAK,UAAU,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE;AAC9E,eAAO,CAAC,CAAC,IAAI,CAAC,YAAW;AACvB,iBAAO,sBAAG,OAAO,CAAC,OAAO,CAAC,SAAS,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,UAAS,MAAM,EAAE;AACtF,mBAAO,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC;WACpD,CAAC,CAAC;SACJ,CAAC,CAAC;OACJ;AACD,aAAO,CAAC,CAAC;KACV,EAAE,sBAAG,OAAO,EAAE,CAAC,CAAC;GAEpB,CAAC,CAAC,IAAI,CAAC,YAAW;AACjB,WAAO,OAAO,CAAC;GAChB,CAAC,CAAC;CAEJ;;qBAEc;AACb,YAAU,EAAE,UAAU;AACtB,MAAI,EAAE,IAAI;AACV,SAAO,EAAE,OAAO;CACjB","file":"lang.js","sourcesContent":["'use strict';\n\nimport _ from 'lodash';\nimport fs from 'fs';\nimport BP from 'bluebird';\n\nfunction bind(fn, ctx) {\n  return function() {\n    return fn.apply(ctx, arguments);\n  };\n}\n\n// Bind a list of methods to the source object for easy callback chaining\nfunction bindAll(obj, methods) {\n\n  if (!methods) {\n    methods = _.functions(obj);\n  } else if (!_.isArray(methods)) {\n    methods = [methods];\n  }\n\n  methods.forEach(function(m) {\n    var current = obj[m];\n    if (current) {\n      obj[m] = bind(obj[m], obj);\n      obj[m].restore = function() {\n        obj[m] = current;\n      };\n    }\n  });\n\n}\n\n/*\n * Include all server startup / configuration snippets.\n *\n * Each include should return function(app, config, services) and may return\n * a value or Promise. Includes will be loaded in filename sort order, and\n * are guaranteed to be loaded consecutively rather than concurrently even\n * if they return a Promise.\n */\n\nfunction requireAll() {\n\n  if (!arguments.length) {\n    throw new Error('No directory specified');\n  }\n\n  var directory = arguments[0];\n  var args = [];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args.push(arguments[i]);\n  }\n\n  var results = {};\n\n  return BP.promisify(fs.readdir)(directory).then(function(files) {\n\n    return files\n      .sort(function(a, b) {\n        return a < b ? -1 : 1;\n      })\n      .reduce(function (p, f) {\n        if (f && f !== 'index.js' && f[0] !== '.' && f.indexOf('.js') === f.length - 3) {\n          return p.then(function() {\n            return BP.resolve(require(directory + '/' + f).apply(null, args)).then(function(result) {\n              results[f.substring(0, f.indexOf('.js'))] = result;\n            });\n          });\n        }\n        return p;\n      }, BP.resolve());\n\n  }).then(function() {\n    return results;\n  });\n\n}\n\nexport default {\n  requireAll: requireAll,\n  bind: bind,\n  bindAll: bindAll\n};\n"],"sourceRoot":"/source/"}